# Puerto aleatorio para evitar conflictos
server.port=0

# Desactivar Eureka para tests
eureka.client.enabled=false
eureka.client.register-with-eureka=false
eureka.client.fetch-registry=false

# Rutas Mockeadas
# ${wiremock.server.port} se inyectará dinámicamente en el test.

# 1. Auth Service (BFF y validación JWK)
bff.auth-service-uri=http://localhost:${wiremock.server.port}
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://localhost:${wiremock.server.port}/oauth2/jwks

# 2. Rutas del Gateway

# 1. Ruta para Servidor de Autenticacion
spring.cloud.gateway.server.webflux.routes[0].id=reservas-auth-service
spring.cloud.gateway.server.webflux.routes[0].uri=http://localhost:${wiremock.server.port}
spring.cloud.gateway.server.webflux.routes[0].predicates[0]=Path=/api/auth/**

# 2. Ruta para Microservicio de Usuarios
spring.cloud.gateway.server.webflux.routes[1].id=reservas-usuarios-service
spring.cloud.gateway.server.webflux.routes[1].uri=http://localhost:${wiremock.server.port}
spring.cloud.gateway.server.webflux.routes[1].predicates[0]=Path=/api/users/**

# 3. Ruta para Microservicio de Servicios
spring.cloud.gateway.server.webflux.routes[2].id=reservas-servicios-service
spring.cloud.gateway.server.webflux.routes[2].uri=http://localhost:${wiremock.server.port}
spring.cloud.gateway.server.webflux.routes[2].predicates[0]=Path=/api/services/**

# 4. Ruta para Microservicio de Agenda
spring.cloud.gateway.server.webflux.routes[3].id=reservas-agenda-service
spring.cloud.gateway.server.webflux.routes[3].uri=http://localhost:${wiremock.server.port}
spring.cloud.gateway.server.webflux.routes[3].predicates[0]=Path=/api/reservations/**

# 5. Ruta para Microservicio de Pagos
spring.cloud.gateway.server.webflux.routes[4].id=reservas-pagos-service
spring.cloud.gateway.server.webflux.routes[4].uri=http://localhost:${wiremock.server.port}
spring.cloud.gateway.server.webflux.routes[4].predicates[0]=Path=/api/payments/**

# 6. Ruta para Microservicio de Reportes
spring.cloud.gateway.server.webflux.routes[5].id=reservas-reportes-service
spring.cloud.gateway.server.webflux.routes[5].uri=http://localhost:${wiremock.server.port}
spring.cloud.gateway.server.webflux.routes[5].predicates[0]=Path=/api/reports/**

# Credenciales Falsas
bff.client-id=gateway-test
bff.client-secret=secret-test